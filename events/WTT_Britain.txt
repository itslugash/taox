###############################
# WTT Events - United Kingdom #
###############################

add_namespace = wtt_britain 

country_event = { # "The MacDonald Proposal"
	id = wtt_britain.24
	title = wtt_britain.24.t
	desc = wtt_britain.24.d
	picture = GFX_report_event_generic_parliament

	is_triggered_only = yes
	
	option = { # "An excellent idea."
		name = wtt_britain.24.a
		ai_chance = {
			factor = 80
			modifier = {
				has_government = right-wing
				factor = 0
			}
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
		ENG = {
			add_to_faction = IRE
			country_event = {
				id = wtt_britain.28
			}
		}
		IRE = {
			transfer_state = 119
		}
	}
	option = { # "The prize is not worth the cost."
		name = wtt_britain.24.b
		ENG = {
			country_event = {
				id = wtt_britain.29
			}
		}
	}
}

country_event = { # "British Demand French Fleet"
	id = wtt_britain.25
	title = wtt_britain.25.t
	desc = wtt_britain.25.d
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes
	
	option = { # "We have no other choice..."
		name = wtt_britain.25.a
		ai_chance = {
			factor = 10
			modifier = {
				has_opinion = {
					target = ENG
					value < -99
				}
				factor = 0
			}
			modifier = {
				has_opinion = {
					target = ENG
					value > -50
				}
				factor = 1.5
			}
			modifier = {
				has_opinion = {
					target = ENG
					value > 0
				}
				factor = 2
			}
		}
		ENG = {
			country_event = {
				id = wtt_britain.26
			}
		}
		hidden_effect = {
			news_event = {
				id = news.332 days = 1
			}
		}
		transfer_navy = {
			target = ENG
		}
	}
	option = { # "We shall never let any other nation take our fleet!"
		name = wtt_britain.25.b
		ai_chance = {
			factor = 90
		}
		ENG = {
			country_event = {
				id = wtt_britain.27
			}
		}
	}
}

country_event = { # "French Surrender Fleet"
	id = wtt_britain.26
	title = wtt_britain.26.t
	desc = wtt_britain.26.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
	
	option = { # "At least we kept it out of the hands of the Germans."
		name = wtt_britain.26.a
	}
}

country_event = { # "French Reject Ultimatum"
	id = wtt_britain.27
	title = wtt_britain.27.t
	desc = wtt_britain.27.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
	
	option = { # "We cannot allow the French fleet to serve German interests!"
		name = wtt_britain.27.a
		ai_chance = {
			factor = 85
		}
		add_war_support = 0.05
		add_popularity = {
			ideology = centre
			popularity = -0.05
		}
		random_other_country = {
			limit = {
				original_tag = FRA
				has_government = right-wing
			}
			add_war_support = 0.05
			add_opinion_modifier = {
				target = ROOT
				modifier = FRA_mers_el_kebir
			}
		}
		if = {
			limit = {
				GER = {
					has_government = right-wing
				}
			}
			GER = {
				add_popularity = {
					ideology = right-wing
					popularity = 0.05
				}
			}
		}
		if = {
			limit = {
				GER = {
					has_government = syncretic
				}
			}
			GER = {
				add_popularity = {
					ideology = syncretic
					popularity = 0.05
				}
			}
		}
		USA = {
			set_country_flag = mers_el_kebir_raid
		}
		hidden_effect = {
			news_event = {
				id = news.333 days = 1
			}
		}
		random_list = {
			60 = {
				random_other_country = {
					limit = {
						original_tag = FRA
						has_government = right-wing
					}
					destroy_ships = {
						type = destroyer
						count = 1
					}
					destroy_ships = {
						type = battleship
						count = 1
					}
				}
			}
			30 = {
				random_other_country = {
					limit = {
						original_tag = FRA
						has_government = right-wing
					}
					destroy_ships = {
						type = destroyer
						count = 2
					}
					destroy_ships = {
						type = battleship
						count = 2
					}
				}
			}
			10 = {
				random_other_country = {
					limit = {
						original_tag = FRA
						has_government = right-wing
					}
					destroy_ships = {
						type = destroyer
						count = 4
					}
					destroy_ships = {
						type = battleship
						count = 3
					}
				}
			}
		}
	}
	option = { # "This is too unpalatable. We must back down."
		name = wtt_britain.27.b
		ai_chance = {
			factor = 15
			modifier = {
				factor = 0
				FROM = {
					has_opinion = {
						target = ENG value < -99
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					has_opinion = {
						target = ENG value > -50
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					has_opinion = {
						target = ENG value > 0
					}
				}
			}
		}
		add_war_support = -0.05
	}
}

country_event = { # "Ireland Accepts MacDonald Proposal"
	id = wtt_britain.28
	title = wtt_britain.28.t
	desc = wtt_britain.28.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	option = { # "Excellent."
		name = wtt_britain_28.a
	}
}

country_event = { # "Ireland Rejects MacDonald Proposal"
	id = wtt_britain.29
	title = wtt_britain.29.t
	desc = wtt_britain.29.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	option = { # "Who will help them when the Germans come for them?"
		name = wtt_britain.29.a
	}
}

country_event = { # "American Emergency Arms Deliveries"
	id = wtt_britain.30
	title = wtt_britain.30.t
	desc = wtt_britain.30.d
	picture = GFX_report_event_generic_factory

	is_triggered_only = yes
	
	option = { # "They have saved us from invasion!"
		name = wtt_britain.30.a
		effect_tooltip = {
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 20000
				producer = USA
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment_1
				amount = 250
				producer = USA
			}
			add_equipment_to_stockpile = {
				type = support_equipment_1
				amount = 250
				producer = USA
			}
		}
	}
}

add_namespace = wtt_britain_lease_azores

country_event = { # "[From.GetNameDefCap] Requests lease of the Azores"
	id = wtt_britain_lease_azores.1
	title = wtt_britain_lease_azores.1.t
	desc = wtt_britain_lease_azores.1.desc
	picture = GFX_report_event_degaulle_churchill

	is_triggered_only = yes
	
	option = { # "Better than dragging us into the war..."
		name = wtt_britain_lease_azores.1.a
		ai_chance = {
			base = 10
		}
		FROM = {
			set_country_flag = wtt_britain_lease_azores_accepted
			transfer_state = 698
			country_event = {
				id = wtt_britain_lease_azores.2
			}
		}
	}
	option = {
		name = wtt_britain_lease_azores.1.b
		ai_chance = {
			base = 0
		}
		FROM = {
			country_event = {
				id = wtt_britain_lease_azores.3
			}
		}
	}
}

country_event = { # "[From.GetNameDefCap] Accepts"
	id = wtt_britain_lease_azores.2
	title = wtt_britain_lease_azores.2.t
	desc = wtt_britain_lease_azores.2.desc
	picture = GFX_report_event_usa_heavy_cruiser

	is_triggered_only = yes
	
	option = { # "This will prove useful."
		name = wtt_britain_lease_azores.2.a
	}
}

country_event = { # "[From.GetNameDefCap] Refuses"
	id = wtt_britain_lease_azores.3
	title = wtt_britain_lease_azores.3.t
	desc = wtt_britain_lease_azores.3.desc
	picture = GFX_report_event_french_british_officers

	is_triggered_only = yes
	
	option = { # "We will remember this."
		name = wtt_britain_lease_azores.3.a
		add_opinion_modifier = {
			target = FROM
			modifier = POR_rejected_lease
		}
	}
}

country_event = { # "Azores Lease Over"
	id = wtt_britain_lease_azores.4
	title = wtt_britain_lease_azores.4.t
	desc = wtt_britain_lease_azores.4.desc
	picture = GFX_report_event_ast_navy

	trigger = {
		has_country_flag = wtt_britain_lease_azores_accepted
		has_war = no
	}

	mean_time_to_happen = {
		days = 2
	}

	fire_only_once = yes
	
	option = { # "The British always pay their debts."
		name = wtt_britain_lease_azores.4.a
		POR = {
			transfer_state = 698
			country_event = wtt_britain_lease_azores.5
		}
	}
}

country_event = { # "Britain exits the Azores"
	id = wtt_britain_lease_azores.5
	title = wtt_britain_lease_azores.5.t
	desc = wtt_britain_lease_azores.5.desc
	picture = GFX_report_event_ast_navy

	is_triggered_only = yes
	
	option = { # "The best possible outcome."
		name = wtt_britain_lease_azores.5.a		
	}
}