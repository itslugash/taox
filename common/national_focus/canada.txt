#####################################
# TAOX - Canada National Focus Tree #
#####################################

focus_tree = {
	id = canadian_focus
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			tag = CAN
			has_dlc = "Together for Victory"
		}

		#modifier = {
		#	add = 10
		#	original_tag = CAN
		#	has_dlc = "Together for Victory"
		#}
	}
	
	default = no

	###################
	# Industry Branch #
	###################

		focus = { # Rowell-Sirois Commission
			id = CAN_rowell_sirois_commission
			icon = GFX_goal_generic_consumer_goods

			x = 0
			y = 0

			cost = 10

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_political_power = 120
			}

			ai_will_do = {
				factor = 24
				modifier = {
					factor = 3
					has_completed_focus = CAN_crown_corporations
				}
			}
		}

		focus = { # Crown Corporations
			id = CAN_crown_corporations
			icon = GFX_goal_generic_construct_civ_factory

			x = 3
			y = 0
			relative_position_id = CAN_rowell_sirois_commission

			cost = 10

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				custom_effect_tooltip = available_political_advisor
				show_ideas_tooltip = CAN_c_d_howe
			}

			ai_will_do = {
				factor = 25
				modifier = {
					factor = 3
					has_completed_focus = CAN_rowell_sirois_commission
				}
			}
		}

		focus = { # National Housing Act
			id = CAN_national_housing_act
			icon = GFX_goal_generic_construct_civilian
			
			x = 2
			y = 1

			relative_position_id = CAN_rowell_sirois_commission

			cost = 10

			prerequisite = {
				focus = CAN_crown_corporations
			}
			prerequisite = {
				focus = CAN_rowell_sirois_commission
			}
			
			bypass = {
				custom_trigger_tooltip = {
					tooltip = construction_effort_tt
					all_owned_state = {
						free_building_slots = {
							building = industrial_complex
							size < 1
							include_locked = yes
						}
					}
				}
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				random_state = {
					limit = {
						has_state_flag = CAN_national_housing_act_IC
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}

			completion_reward = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_national_housing_act_IC
				}
			}

			ai_will_do = {
				factor = 75
			}
		}

		focus = { # Dollar-a-Year Man
			id = CAN_dollar_a_year_men
			icon = GFX_goal_generic_construction

			x = 2
			y = 2

			relative_position_id = CAN_rowell_sirois_commission

			cost = 10

			prerequisite = {
				focus = CAN_national_housing_act
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_dollar_a_year_men
					bonus = 0.5
					uses = 1
					category = industry
				}
			}

			ai_will_do = {
				factor = 75
			}
		}

		focus = { # Canadian Pacific Highway
			id = CAN_canada_pacific_railway
			icon = GFX_goal_generic_construct_infrastructure

			x = 0
			y = 2

			relative_position_id = CAN_rowell_sirois_commission

			cost = 10

			prerequisite = {
				focus = CAN_rowell_sirois_commission
			}
			
			bypass = {
				custom_trigger_tooltip = {
					tooltip = infrastructure_effort_tt
					all_owned_state = {			
						free_building_slots = {
							building = infrastructure
							size < 1
						}
					}
				}
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				random_state = {
					limit = {
						has_state_flag = CAN_canada_pacific_railway_Inf
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
			}

			completion_reward = {
				random_owned_controlled_state = {
					prioritize = {
						473 471
					}
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 1
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
					set_state_flag = CAN_canada_pacific_railway_Inf
				}
			}

			ai_will_do = {
				factor = 75
			}
		}

		focus = { # Maritime Colonial Railway
			id = CAN_maritime_colonial_railway
			icon = GFX_goal_generic_construct_infrastructure

			x = 0
			y = 3

			relative_position_id = CAN_rowell_sirois_commission

			cost = 10

			prerequisite = {
				focus = CAN_canada_pacific_railway
			}
			
			bypass = {
				custom_trigger_tooltip = {
					tooltip = infrastructure_effort_tt
					all_owned_state = {			
						free_building_slots = {
							building = infrastructure
							size < 1
						}
					}
				}
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = no

			complete_tooltip = {
				random_state = {
					limit = {
						has_state_flag = CAN_maritime_colonial_railway_Inf
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
			}

			completion_reward = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 1
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
					set_state_flag = CAN_maritime_colonial_railway_Inf
				}
			}
		}

		focus = { # Retool Angus Shops
			id = CAN_retool_angus_shops
			icon = GFX_goal_generic_construct_mil_factory
			
			x = 2
			y = 3

			relative_position_id = CAN_rowell_sirois_commission

			cost = 10

			prerequisite = {
				focus = CAN_bits_and_pieces_program
			}
			prerequisite = {
				focus = CAN_canada_pacific_railway
			}

			bypass = {
				custom_trigger_tooltip = {
					tooltip = production_effort_tt
					all_owned_state = {
						free_building_slots = {
							building = arms_factory
							size < 1
							include_locked = yes
						}					
					}
				}
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				random_state = {
					limit = {
						has_state_flag = CAN_retool_angus_shops_AF
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}

			completion_reward = {
				random_owned_controlled_state = {
					prioritize = {
						285 517
					}
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_retool_angus_shops_AF
				}
			}

			ai_will_do = {
				factor = 75
			}
		}

		focus = { # Imperial Oil
			id = CAN_imperial_oil
			icon = GFX_goal_generic_oil_refinery

			x = 2
			y = 4

			relative_position_id = CAN_rowell_sirois_commission

			cost = 10

			prerequisite = {
				focus = CAN_retool_angus_shops
			}

			available = {
				controls_state = 470
				controls_state = 471
				controls_state = 472
				controls_state = 683
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				470 = {
					add_resource = {
						type = oil
						amount = 2
					}
				}
				471 = {
					add_resource = {
						type = oil
						amount = 4
					}
				}
				472 = {
					add_resource = {
						type = oil
						amount = 4
					}
				}
				683 = {
					add_resource = {
						type = oil
						amount = 4
					}
				}
			}

			ai_will_do = {
				factor = 75
			}
		}

	###################
	# War Prep Branch #
	###################

		focus = { # Defence of Canada Regulations
			id = CAN_defence_of_canada_regulations
			icon = GFX_goal_generic_construct_military

			x = 8
			y = 0

			cost = 10

			available = {
				threat > 0.2
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				if = {
					limit = {
						has_government = socialism
						has_government = liberalism
						has_government = conservatism
					}
					add_ideas = CAN_defence_of_canada_regulations_democratic
				}
				if = {
					limit = {
						has_government = communism
					}
					add_ideas = CAN_defence_of_canada_regulations_communism
				}
				if = {
					limit = {
						has_government = fascism
					}
					add_ideas = CAN_defence_of_canada_regulations_fascism
				}
			}

			ai_will_do = {
				factor = 30
			}
		}

		focus = { # War Bonds
			id = CAN_war_bonds
			icon = GFX_goal_generic_consumer_goods

			x = -2
			y = 0

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			available = {
				has_war = yes
			}
			
			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_ideas = CAN_war_bonds_1
			}

			ai_will_do = {
				factor = 80
			}
		}

		focus = { # Department of Munitions and Supply
			id = CAN_department_of_munitions_and_supply
			icon = GFX_goal_generic_build_tank

			x = -3
			y = 1

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_crown_corporations
			}
			prerequisite = {
				focus = CAN_defence_of_canada_regulations
			}
			prerequisite = {
				focus = CAN_war_bonds
			}
			
			bypass = {
				custom_trigger_tooltip = {
					tooltip = production_effort_tt
					all_owned_state = {
						free_building_slots = {
							building = arms_factory
							size < 1
							include_locked = yes
						}					
					}
				}
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				random_state = {
					limit = {
						has_state_flag = CAN_department_of_munitions_and_supply_AF1
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				random_state = {
					limit = {
						has_state_flag = CAN_department_of_munitions_and_supply_AF2
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}

			completion_reward = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_department_of_munitions_and_supply_AF1
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_department_of_munitions_and_supply_AF2
				}
			}

			ai_will_do = {
				factor = 50
			}
		}

		focus = { # National Resources Mobilization Act
			id = CAN_national_resources_mobilization_act
			icon = GFX_goal_generic_demand_territory

			x = -1
			y = 1

			relative_position_id = CAN_defence_of_canada_regulations

			prerequisite = {
				focus = CAN_defence_of_canada_regulations
			}

			cost = 10

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_ideas = CAN_national_resources_mobilization_act
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Wartime Prices and Trade Board
			id = CAN_wartime_prices_and_trade_board
			icon = GFX_goal_generic_positive_trade_relations

			x = 2
			y = 1

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_defence_of_canada_regulations
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = no

			completion_reward = {
				add_ideas = CAN_wartime_prices_and_trade_board
			}

			ai_will_do = {
				factor = 50
			}
		}

		focus = { # Bits and Pieces Program
			id = CAN_bits_and_pieces_program
			icon = GFX_goal_generic_construct_mil_factory

			x = -4
			y = 2

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_department_of_munitions_and_supply
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_ideas = CAN_bits_and_pieces_program
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Fund the National Research Council
			id = CAN_fund_the_national_research_council
			icon = GFX_focus_research

			x = -1
			y = 2

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_department_of_munitions_and_supply
				focus = CAN_national_resources_mobilization_act
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_research_slot = 1
			}

			ai_will_do = {
				factor = 75
			}
		}

		focus = { # Mine the Shield
			id = CAN_mine_the_shield
			icon = GFX_goal_generic_construction2

			x = 1
			y = 2

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_national_resources_mobilization_act
			}

			bypass = {
				NOT = {
					any_owned_state = {
						is_in_home_area = yes
					}
				}
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				random_owned_controlled_state = {
					prioritize = {
						471 472 683
					}
					limit = {
						is_in_home_area = yes
					}
					add_resource = {
						type = steel
						amount = 2
					}
				}
				random_owned_controlled_state = {
					prioritize = {
						471 472 683
					}
					limit = {
						is_in_home_area = yes
					}
					add_resource = {
						type = steel
						amount = 2
					}
				}
				random_owned_controlled_state = {
					prioritize = {
						471 472 683
					}
					limit = {
						is_in_home_area = yes
					}
					add_resource = {
						type = chromium
						amount = 3
					}
				}
			}

			ai_will_do = {
				factor = 25
				modifier = {
					factor = 2
					has_completed_focus = CAN_canada_wheat_board
				}
			}
		}

		focus = { # Canada Wheat Board
			id = CAN_canada_wheat_board
			icon = GFX_goal_generic_construction2

			x = 3
			y = 2
			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_wartime_prices_and_trade_board
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				swap_ideas = {
					remove_idea = CAN_great_depression_1
					add_idea = CAN_great_depression_2		
				}
			}

			ai_will_do = {
				factor = 25
				modifier = {
					factor = 2
					has_completed_focus = CAN_mine_the_shield
				}
			}
		}

		focus = { # Victory Aircraft Limited
			id = CAN_victory_aircraft_limited
			icon = GFX_goal_generic_production2

			x = -2
			y = 3

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_department_of_munitions_and_supply
			}

			bypass = {
				custom_trigger_tooltip = {
					tooltip = production_effort_tt
					all_owned_state = {
						free_building_slots = {
							building = arms_factory
							size < 1
							include_locked = yes
						}					
					}
				}
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				random_state = {
					limit = {
						has_state_flag = CAN_victory_aircraft_limited_AF1
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
				random_state = {
					limit = {
						has_state_flag = CAN_victory_aircraft_limited_AF2
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}

			completion_reward = {
				random_owned_controlled_state = {
					prioritize = {
						276 682
					}
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
					set_state_flag = CAN_victory_aircraft_limited_AF1
				}
				random_owned_controlled_state = {
					prioritize = {
						276 682
					}
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_victory_aircraft_limited_AF2
				}
			}

			ai_will_do = {
				factor = 25
				modifier = {
					factor = 2
					has_completed_focus = CAN_john_inglis_and_company
				}
			}
		}

		focus = { # Alberta Coal Towns
			id = CAN_alberta_coal_towns
			icon = GFX_goal_generic_construct_civ_factory
			
			x = 2
			y = 3

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_canada_wheat_board
			}
			prerequisite = {
				focus = CAN_mine_the_shield
			}

			bypass = {
				custom_trigger_tooltip = {
					tooltip = construction_effort_tt
					all_owned_state = {
						free_building_slots = {
							building = industrial_complex
							size < 1
							include_locked = yes
						}					
					}
				}
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				random_state = {
					limit = {
						has_state_flag = CAN_alberta_coal_towns_IC
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = industrial_complex
						level = 3
						instant_build = yes
					}
				}
			}

			completion_reward = {
				random_owned_controlled_state = {
					prioritize = {
						470
					}
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 2
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = industrial_complex
						level = 3
						instant_build = yes
					}
					set_state_flag = CAN_alberta_coal_towns_IC
				}
			}

			ai_will_do = {
				factor = 50
			}
		}

		focus = { # Commit to the War
			id = CAN_commit_to_the_war
			icon = GFX_goal_generic_attack_allies

			x = 4
			y = 3

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_canada_wheat_board
			}
			
			available = {
				has_war = yes
			}
			
			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_ideas = CAN_commit_to_the_war
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # John Inglis and Company
			id = CAN_john_inglis_and_company
			icon = GFX_goal_generic_construct_military

			x = -4
			y = 4

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_bits_and_pieces_program
			}

			bypass = {
				custom_trigger_tooltip = {
					tooltip = production_effort_tt
					all_owned_state = {
						free_building_slots = {
							building = arms_factory
							size < 1
							include_locked = yes
						}
					}
				}
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				random_state = {
					limit = {
						has_state_flag = CAN_john_inglis_and_company_AF1
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
				random_state = {
					limit = {
						has_state_flag = CAN_john_inglis_and_company_AF2
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}

			completion_reward = {
				random_owned_controlled_state = {
					prioritize = {
						276 682
					}
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
					set_state_flag = CAN_john_inglis_and_company_AF1
				}
				random_owned_controlled_state = {
					prioritize = {
						276 682
					}
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_john_inglis_and_company_AF2
				}
			}

			ai_will_do = {
				factor = 25
				modifier = {
					factor = 2
					has_completed_focus = CAN_victory_aircraft_limited
				}
			}
		}

		focus = { # Polymer Corporation
			id = CAN_polymer_corporation
			icon = GFX_goal_generic_oil_refinery

			x = -1
			y = 4
			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_victory_aircraft_limited focus = CAN_fund_the_national_research_council
			}

			bypass = {
				custom_trigger_tooltip = {
					tooltip = synth_oil_effort_tt
					all_owned_state = {
						free_building_slots = {
							building = synthetic_refinery
							size < 0
							include_locked = yes
						}
					}
				}
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				if = {
					limit = { has_country_flag = CAN_polymer_corporation_unlock }
					set_technology = { synth_oil_experiments = 1 }
					else = {					
						add_tech_bonus = {
							name = CAN_polymer_corporation
							ahead_reduction = 1
							bonus = 0.5
							uses = 1
							category = synth_resources
						}
					}				
				}
				random_state = {
					limit = {
						has_state_flag = CAN_polymer_corporation_1
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = synthetic_refinery
						level = 1
						instant_build = yes
					}
				}
				random_state = {
					limit = {
						has_state_flag = CAN_polymer_corporation_2
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = synthetic_refinery
						level = 1
						instant_build = yes
					}
				}
			}

			completion_reward = {
				if = {
					limit = {
						NOT = {
							has_tech = synth_oil_experiments
						}
					}
					set_technology = {
						synth_oil_experiments = 1
					}
					set_country_flag = CAN_polymer_corporation_unlock
					effect_tooltip = {
						random_owned_controlled_state = {
							prioritize = {
								682
							}
							add_extra_state_shared_building_slots = 1
							add_building_construction = {
								type = synthetic_refinery
								level = 1
								instant_build = yes
							}
							set_state_flag = CAN_polymer_corporation_1
						}
						random_owned_controlled_state = {
							prioritize = {
								276
							}
							add_extra_state_shared_building_slots = 1
							add_building_construction = {
								type = synthetic_refinery
								level = 1
								instant_build = yes
							}
							set_state_flag = CAN_polymer_corporation_2
						}
					}
					else = {
						add_tech_bonus = {
							name = CAN_polymer_corporation
							ahead_reduction = 1
							bonus = 0.5
							uses = 1
							category = synth_resources
						}
					}
				}
				random_owned_controlled_state = {
					prioritize = {
						682
					}
					limit = {
						free_building_slots = {
							building = synthetic_refinery
							size > 0
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = synthetic_refinery
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_polymer_corporation_1
				}
				random_owned_controlled_state = {
					prioritize = {
						276
					}
					limit = {
						free_building_slots = {
							building = synthetic_refinery
							size > 0
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = synthetic_refinery
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_polymer_corporation_2
				}
			}

			ai_will_do = {
				factor = 50
			}
		}

		focus = { # National Steel Car
			id = CAN_national_steel_car
			icon = GFX_goal_generic_construct_infrastructure

			x = 1
			y = 4

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_alberta_coal_towns
			}
			
			mutually_exclusive = {
				focus = CAN_send_in_the_zombies
			}

			bypass = {
				custom_trigger_tooltip = {
					tooltip = construction_effort_tt
					all_owned_state = {
						free_building_slots = {
							building = industrial_complex
							size < 1
							include_locked = yes
						}
					}
				}
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				random_state = {
					limit = {
						has_state_flag = CAN_national_steel_car_IC1
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				random_state = {
					limit = {
						has_state_flag = CAN_national_steel_car_IC2
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}

			completion_reward = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
					set_state_flag = CAN_national_steel_car_IC1
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
					set_state_flag = CAN_national_steel_car_IC2
				}
			}

			ai_will_do = {
				factor = 25
				modifier = {
					factor = 2
					has_completed_focus = CAN_if_day
				}
			}
		}

		focus = { # Send in the Zombies
			id = CAN_send_in_the_zombies
			icon = GFX_goal_generic_demand_territory

			x = 3
			y = 4

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_commit_to_the_war
			}

			mutually_exclusive = {
				focus = CAN_national_steel_car
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_ideas = CAN_send_in_the_zombies
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # If Day
			id = CAN_if_day
			icon = GFX_goal_generic_propaganda

			x = -2
			y = 5

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_john_inglis_and_company
			}
			prerequisite = {
				focus = CAN_victory_aircraft_limited
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				swap_ideas = {
					remove_idea = CAN_war_bonds_1
					add_idea = CAN_war_bonds_2
				}
			}

			ai_will_do = {
				factor = 25
				modifier = {
					factor = 2
					has_completed_focus = CAN_national_steel_car
				}
			}
		}

		focus = { # Defence Research Grants
			id = CAN_defense_research_grants
			icon = GFX_focus_research

			x = -3
			y = 6

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_if_day
			}
			prerequisite = {
				focus = CAN_john_inglis_and_company
			}

			available = {
				num_of_factories > 50
				is_subject = no
			}
			
			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_research_slot = 1
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Uranium Mining
			id = CAN_uranium_mining
			icon = GFX_focus_wonderweapons
			
			x = 0
			y = 5

			relative_position_id = CAN_defence_of_canada_regulations

			prerequisite = {
				focus = CAN_polymer_corporation focus = CAN_national_steel_car
			}

			cost = 10

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_uranium_mining
					bonus = 0.5
					uses = 2
					category = nuclear
				}	
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Long Branch Arsenal
			id = CAN_long_branch_arsenal
			icon = GFX_goal_generic_small_arms

			x = 2
			y = 5

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_send_in_the_zombies
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_long_branch_arsenal
					bonus = 0.5
					uses = 1
					category = infantry_weapons
					category = artillery
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Independent Command
			id = CAN_independent_command
			icon = GFX_goal_generic_army_doctrines

			x = 4
			y = 5

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_red_deer_training_camp
			}
			prerequisite = {
				focus = CAN_send_in_the_zombies
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				army_experience = 20
				add_tech_bonus = {
					name = CAN_independent_command
					bonus = 0.5
					uses = 1
					category = land_doctrine
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Forced Quebec Conscription
			id = CAN_forced_quebec_conscription
			icon = GFX_goal_tfv_can_forced_quebec_conscription 

			x = 2
			y = 6

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_long_branch_arsenal focus = CAN_independent_command
			}

			mutually_exclusive = {
				focus = CAN_compromise_with_quebec
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				remove_ideas = CAN_conscription_crisis
				custom_effect_tooltip = "CAN_ANGERED_WORKERS"
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Compromise with Quebec
			id = CAN_compromise_with_quebec
			icon = GFX_goal_tfv_can_compromise_with_quebec

			x = 4
			y = 6

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_independent_command
				focus = CAN_long_branch_arsenal
			}
			
			mutually_exclusive = {
				focus =  CAN_forced_quebec_conscription
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				swap_ideas = {
					remove_idea = CAN_conscription_crisis
					add_idea = CAN_conscription_crisis_mended
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # War Fueled Economy
			id = CAN_war_fueled_economy
			icon = GFX_goal_generic_trade
			
			x = 1
			y = 7

			relative_position_id = CAN_defence_of_canada_regulations

			cost = 10

			prerequisite = {
				focus = CAN_if_day
			}
			prerequisite = {
				focus = CAN_national_steel_car
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				remove_ideas = CAN_great_depression_2
				random_state = {
					limit = {
						has_state_flag = CAN_war_fueled_economy_AF1
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				random_state = {
					limit = {
						has_state_flag = CAN_war_fueled_economy_AF2
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				random_state = {
					limit = {
						has_state_flag = CAN_war_fueled_economy_AF3
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}

			completion_reward = {
				remove_ideas = CAN_great_depression_2
				random_owned_controlled_state = {
					limit = {
						is_in_home_area = yes
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_war_fueled_economy_AF1
				}
				random_owned_controlled_state = {
					limit = {
						is_in_home_area = yes
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_war_fueled_economy_AF2
				}
				random_owned_controlled_state = {
					limit = {
						is_in_home_area = yes
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_war_fueled_economy_AF3
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

	###############
	# Army Branch #
	###############

		focus = { # Army Modernization
			id = CAN_army_modernization
			icon = GFX_goal_generic_army_doctrines

			x = 15
			y = 0

			cost = 10

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				army_experience = 5 
				add_tech_bonus = {
					name = CAN_army_modernization
					bonus = 0.5
					uses = 1
					category = land_doctrine
				}
			}

			ai_will_do = {
				factor = 4
			}
		}

		focus = { # Canadian Infantry Corps
			id = CAN_canadian_infantry_corps
			icon = GFX_goal_generic_allies_build_infantry

			x = -1
			y = 1

			relative_position_id = CAN_army_modernization

			cost = 10

			prerequisite = {
				focus = CAN_army_modernization
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_canadian_infantry_corps
					bonus = 0.5
					uses = 1
					category = infantry_weapons
					category = artillery
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # CMP Truck
			id = CAN_cmp_truck
			icon = GFX_goal_generic_army_motorized

			x = 1
			y = 1

			relative_position_id = CAN_army_modernization

			cost = 10

			prerequisite = {
				focus = CAN_army_modernization
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_cmp_truck
					ahead_reduction = 1
					bonus = 0.75
					uses = 1
					category = motorized_equipment
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # The Walkie Talkie
			id = CAN_the_walkie_talkie
			icon = GFX_goal_generic_radar

			x = 0
			y = 2

			relative_position_id = CAN_army_modernization 

			cost = 10

			prerequisite = {
				focus = CAN_canadian_infantry_corps
				focus = CAN_cmp_truck
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_the_walkie_talkie
					bonus = 0.5
					uses = 1
					category = electronics
				}
				add_tech_bonus = {
					name = CAN_the_walkie_talkie
					bonus = 0.5
					uses = 1
					technology = tech_signal_company
					technology = tech_signal_company2
					technology = tech_signal_company3
					technology = tech_signal_company4
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Royal Regiment of Canadian Artillery
			id = CAN_royal_regiment_of_canadian_artillery
			icon = GFX_goal_generic_army_artillery2

			x = -1
			y = 3

			relative_position_id = CAN_army_modernization

			cost = 10

			prerequisite = {
				focus = CAN_canadian_infantry_corps
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_royal_regiment_of_canadian_artillery
					bonus = 0.5
					uses = 1
					category = artillery
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # A Motorized Army
			id = CAN_a_motorized_army
			icon = GFX_goal_generic_build_tank

			x = 1
			y = 3

			relative_position_id = CAN_army_modernization 

			cost = 10

			prerequisite = {
				focus = CAN_cmp_truck
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_a_motorized_army
					bonus = 0.5
					uses = 1
					category = motorized_equipment
					technology = tech_field_hospital
					technology = tech_field_hospital2
					technology = tech_field_hospital3
					technology = tech_field_hospital4
					technology = tech_logistics_company
					technology = tech_logistics_company2
					technology = tech_logistics_company3
					technology = tech_logistics_company4
					technology = tech_signal_company
					technology = tech_signal_company2
					technology = tech_signal_company3
					technology = tech_signal_company4
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Red Deear Training Camp
			id = CAN_red_deer_training_camp
			icon = GFX_goal_generic_military_sphere

			x = -2
			y = 4

			relative_position_id = CAN_army_modernization 

			cost = 10

			prerequisite = {
				focus = CAN_a_motorized_army
				focus = CAN_royal_regiment_of_canadian_artillery
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				army_experience = 5
				add_tech_bonus = {
					name = CAN_red_deer_training_camp
					bonus = 0.5
					uses = 1
					category = land_doctrine
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # 1st Canadian Parachute Battalion
			id = CAN_1st_canadian_parachute_battalion
			icon = GFX_goal_generic_special_forces 

			x = 2
			y = 4

			relative_position_id = CAN_army_modernization 

			cost = 10

			prerequisite = {
				focus = CAN_a_motorized_army
				focus = CAN_the_plan
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_1st_canadian_parachute_battalion
					bonus = 0.75
					uses = 1
					category = para_tech
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # The Black Devils
			id = CAN_the_black_devils
			icon = GFX_goal_generic_special_forces

			x = -1
			y = 5

			relative_position_id = CAN_army_modernization 

			cost = 10

			prerequisite = {
				focus = CAN_red_deer_training_camp
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_the_black_devils
					bonus = 0.50
					uses = 1
					category = marine_tech
					category = para_tech
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # The Rocky Mountain Rangers
			id = CAN_the_rocky_mountain_rangers
			icon = GFX_goal_generic_special_forces

			x = 1
			y = 5

			relative_position_id = CAN_army_modernization 

			cost = 10

			prerequisite = {
				focus = CAN_red_deer_training_camp
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_the_rocky_mountain_rangers
					bonus = 0.50
					uses = 1
					category = mountaineers_tech
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # The Valentine Tank
			id = CAN_the_valentine_tank
			icon = GFX_goal_generic_army_tanks

			x = 0
			y = 6

			relative_position_id = CAN_army_modernization 

			cost = 10

			prerequisite = {
				focus = CAN_red_deer_training_camp
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_the_valentine_tank
					bonus = 0.5
					uses = 1
					category = armor
				}
				add_tech_bonus = {
					name = CAN_the_valentine_tank
					ahead_reduction = 1
					bonus = 0.5
					uses = 1
					category = cat_light_armor
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

	#######################
	# Loyal to ENG Branch #
	#######################

		focus = { # Strengthen the commonwealth Ties
			id = CAN_strengthen_the_commonwealth_ties

			x = 21
			y = 0

			icon = GFX_goal_tfv_strengthen_commonwealth_ties

			cost = 10

			mutually_exclusive = {
				focus = CAN_patriation
			}

			available = {
				ENG = {
					has_government = ROOT
				}
				is_in_tech_sharing_group = commonwealth_research
			}
			
			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
	   			modify_tech_sharing_bonus = {
	         		id = commonwealth_research
	         		bonus = 0.03
				}
				ENG = {
					add_opinion_modifier = {
						target = ROOT
						modifier = CAN_strengthen_the_commonwealth_ties
					}
				}
			}

			ai_will_do = {
				factor = 9
				modifier = {
					OR = {
						socialism < 0.4
						liberalism < 0.4
						conservatism < 0.4
					}
					factor = 0.5
				}
			}
		}

		focus = { # Shadow Factories
			id = CAN_shadow_factories
			icon = GFX_goal_generic_construct_mil_factory

			x = -2
			y = 1

			relative_position_id = CAN_strengthen_the_commonwealth_ties

			cost = 10

			prerequisite = {
				focus = CAN_strengthen_the_commonwealth_ties
			}

			available = {
				threat > 0.05
			}
			
			bypass = {
				custom_trigger_tooltip = {
					tooltip = production_effort_tt
					all_owned_state = {
						free_building_slots = {
							building = arms_factory
							size < 1
							include_locked = yes
						}
					}
				}
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				random_state = {
					limit = {
						has_state_flag = CAN_shadow_factories_AF1
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				random_state = {
					limit = {
						has_state_flag = CAN_shadow_factories_AF2
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				random_state = {
					limit = {
						has_state_flag = CAN_shadow_factories_AF3
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}

			completion_reward = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_shadow_factories_AF1
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_shadow_factories_AF2
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					set_state_flag = CAN_shadow_factories_AF3
				}
			}

			ai_will_do = {
				factor = 35
			}
		}

		focus = { # montreal Laboratory Collaboration
			id = CAN_montreal_laboratory_collaboration
			icon = GFX_goal_tfv_generic_tech_sharing

			x = 0
			y = 1

			relative_position_id = CAN_strengthen_the_commonwealth_ties

			cost = 10

			prerequisite = {
				focus = CAN_strengthen_the_commonwealth_ties
			}

			available = {
				is_in_faction_with = ENG
				is_in_tech_sharing_group = commonwealth_research
			}
			
			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				CAN = {
	   				 modify_tech_sharing_bonus = {
	        			id = commonwealth_research
	        			bonus = 0.05  
	    			}
				}
			}

			ai_will_do = {
				factor = 35
			}
		}

		focus = { # The Plan
			id = CAN_the_plan
			icon = GFX_goal_generic_air_fighter

			x = -2
			y = 2

			relative_position_id = CAN_strengthen_the_commonwealth_ties

			cost = 10

			prerequisite = {
				focus = CAN_shadow_factories
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = no

			completion_reward = {
				add_ideas = CAN_the_plan
			}

			ai_will_do = {
				factor = 25
				modifier = {
					factor = 2
					has_completed_focus = CAN_supply_the_empire
				}
			}
		}

		focus = { # Camp X
			id = CAN_camp_x
			icon = GFX_goal_generic_intelligence_exchange 

			x = 0
			y = 2

			relative_position_id = CAN_strengthen_the_commonwealth_ties

			cost = 10

			prerequisite = {
				focus = CAN_montreal_laboratory_collaboration
				focus = CAN_permanent_joint_defense_board
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_camp_x
					bonus = 0.5
					uses = 1
					category = encryption_tech
					category = decryption_tech
				}
			}

			ai_will_do = {
				factor = 25
				modifier = {
					factor = 2
					has_completed_focus = CAN_the_plan
				}
			}
		}

		focus = { # Supply the Empire
			id = CAN_supply_the_empire
			icon = GFX_goal_generic_construction2
			
			x = -1
			y = 3

			relative_position_id = CAN_strengthen_the_commonwealth_ties

			cost = 10

			prerequisite = {
				focus = CAN_camp_x
			}
			prerequisite = {
				focus = CAN_the_plan
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_supply_the_empire
					bonus = 0.5
					uses = 3
					technology = excavation1
					technology = excavation2
					technology = excavation3
					technology = excavation4
					technology = excavation5
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Aluminum Company of Canada
			id = CAN_aluminium_company_of_canada
			icon = GFX_goal_generic_positive_trade_relations 

			x = -2
			y = 4

			relative_position_id = CAN_strengthen_the_commonwealth_ties

			cost = 10

			prerequisite = {
				focus = CAN_supply_the_empire
			}

			available = {
				controls_state = 682
				controls_state = 466
				controls_state = 468
			}
			
			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				682 = {
					add_resource = {
						type = aluminium
						amount = 14
					}
				}
				466 = {
					add_resource = {
						type = aluminium
						amount = 4
					}
				}
				468 = {
					add_resource = {
						type = aluminium
						amount = 4
					}
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Turner Valley Oilfield
			id = CAN_turner_valley_oilfield
			icon = GFX_goal_generic_oil_refinery

			x = 0
			y = 4

			relative_position_id = CAN_strengthen_the_commonwealth_ties

			cost = 10

			prerequisite = {
				focus = CAN_supply_the_empire
			}

			available = {
				controls_state = 470
			}
			
			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				470 = {
					add_resource = {
						type = oil
						amount = 36
					}
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

	#######################
	# Independence Branch #
	#######################

		focus = { # Patriation
			id = CAN_patriation
			icon = GFX_goal_tfv_sever_ties_with_uk #GFX_goal_generic_demand_territory

			x = 2
			y = 0

			relative_position_id = CAN_strengthen_the_commonwealth_ties

			cost = 10

			mutually_exclusive = {
				focus = CAN_strengthen_the_commonwealth_ties
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = no

			completion_reward = {
				add_ideas = CAN_patriation
				ENG = {
					add_opinion_modifier = {
						target = CAN modifier = CAN_patriation_mod
					}
				}

				hidden_effect = {
					news_event = {
						id = news.251 hours = 3
					}
				}
			}

			ai_will_do = {
				factor = 5
				modifier = {
					OR = {
						communism > 0.15
						fascism > 0.15
						}
					factor = 2.5
				}
			}
		}

		#########################
		# Democratic Sub-Branch #
		#########################

			focus = { # Permanent Joint Defence Board
				id = CAN_permanent_joint_defense_board
				icon = GFX_goal_generic_improve_relations

				x = 0
				y = 1

				relative_position_id = CAN_patriation

				cost = 10

				prerequisite = {
					focus = CAN_patriation
				}

				mutually_exclusive = {
					focus = CAN_burn_the_royal_portraits
				}
				mutually_exclusive = {
					focus = CAN_swastika_clubs
				}

				available = {
					is_subject = no
					NOT = {
						has_war_with = USA
						is_justifying_wargoal_against = USA
						has_wargoal_against = USA
						has_war_together_with = ENG
					}
					USA = {
						has_government = ROOT
					}			
				}
				
				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = no

				completion_reward = {
					ENG = {
						remove_from_faction = ROOT
					}
					USA = {
						add_opinion_modifier = {
							target = ROOT
							modifier = CAN_permanent_joint_defense_board
						}
					}
					add_opinion_modifier = {
						target = USA
						modifier = CAN_permanent_joint_defense_board
					}
					give_guarantee = USA
				}

				ai_will_do = {
					factor = 25
					modifier = {
						OR = {
							socialism > 0.4
							liberalism > 0.4
							conservatism > 0.4
						}
						factor = 2
					}
					modifier = {
						communism < 0.4
						factor = 0.5
					}
				}
			}

			focus = { # North American Alliance
				id = CAN_north_american_alliance
				icon = GFX_goal_generic_major_alliance

				x = 0
				y = 1

				relative_position_id = CAN_permanent_joint_defense_board

				cost = 10

				prerequisite = {
					focus = CAN_permanent_joint_defense_board
				}

				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = no

				completion_reward = {
					set_rule = {
						can_create_factions = yes
					}
					USA = {
						country_event = {
							id = tfv_canada.1
						}
					}
				}

				ai_will_do = {
					factor = 25
				}
			}

			focus = { # Habakkuk Carrier
				id = CAN_habakkuk_carrier
				icon = GFX_goal_generic_navy_carrier

				x = -1
				y = 2

				relative_position_id = CAN_permanent_joint_defense_board

				cost = 10

				prerequisite = {
					focus = CAN_north_american_alliance
				}

				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = yes

				completion_reward = {
					add_tech_bonus = {
						name = CAN_habakkuk_carrier
						bonus = 0.5
						uses = 2
						category = cv_tech
					}
				}

				ai_will_do = {
					factor = 25
				}
			}

			focus = { # Refuge for Scientists
				id = CAN_refuge_for_scientists
				icon = GFX_goal_tfv_generic_tech_sharing

				x = 1
				y = 2

				relative_position_id = CAN_permanent_joint_defense_board

				cost = 10

				prerequisite = {
					focus = CAN_north_american_alliance
				}

				available = {
					is_in_faction_with = USA
				}
				
				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = yes

				completion_reward = {
				USA = {
					add_to_tech_sharing_group = us_research
				}
				add_to_tech_sharing_group = us_research
				}

				ai_will_do = {
					factor = 35
				}
			}

		######################
		# Fascist Sub-Branch #
		######################

			focus = { # Swastika Clubs
				id = CAN_swastika_clubs
				icon = GFX_goal_support_fascism

				x = 4
				y = 1

				relative_position_id = CAN_patriation

				cost = 10

				prerequisite = {
					focus = CAN_patriation
				}
				
				mutually_exclusive = {
					focus = CAN_burn_the_royal_portraits
				}
				mutually_exclusive = {
					focus = CAN_permanent_joint_defense_board
				}

				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = yes

				completion_reward = {
					add_autonomy_ratio = {
						value = 0.1
						localization = CAN_swastika_clubs
					}
					add_ideas = CAN_swastika_clubs
				}

				ai_will_do = {
					factor = 25
					modifier = {
						fascism > 0.25
						factor = 2
					}
					modifier = {
						fascism > 0.35
						factor = 4
					}
				}
			}

			focus = { # Support the Blue Shirts
				id = CAN_support_the_blue_shirts
				icon = GFX_goal_generic_more_territorial_claims

				x = 0
				y = 1

				relative_position_id = CAN_swastika_clubs

				cost = 10

				prerequisite = {
					focus = CAN_swastika_clubs
				}

				available = {
					is_subject = no
					has_government = fascism
				}
				
				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = yes

				completion_reward = {
					swap_ideas = {
						remove_idea = CAN_swastika_clubs
						add_idea = CAN_swastika_clubs_2
					}
				}

				ai_will_do = {
					factor = 25
				}
			}

			focus = { # Join Germany
				id = CAN_join_germany
				icon = GFX_goal_generic_major_alliance

				x = -1
				y = 2

				relative_position_id = CAN_swastika_clubs

				cost = 10

				prerequisite = {
					focus = CAN_support_the_blue_shirts
				}
				
				mutually_exclusive = {
					focus = CAN_support_a_synarchist_baja
				}

				bypass = {
					is_in_faction_with = GER
				}

				available = {
					has_government = fascism
					GER = {
						has_government = fascism
					}

					NOT = {
						has_war_with = GER
						is_justifying_wargoal_against = GER
						has_wargoal_against = GER
					}
				}

				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = no

				completion_reward = {
					GER = { 
						country_event = {
							id = tfv_canada.20
						}
					}
				}

				ai_will_do = {
					factor = 25
					modifier = {
						GER = {
							surrender_progress > 0.5
						}
						factor = 0 #nopenopenopenope
					}
				}
			}

			focus = { # A Synarchist Baja
				id = CAN_support_a_synarchist_baja
				icon = GFX_goal_generic_dangerous_deal

				x = 1
				y = 2

				relative_position_id = CAN_swastika_clubs

				cost = 10

				prerequisite = {
					focus = CAN_support_the_blue_shirts
				}
				
				mutually_exclusive = {
					focus = CAN_join_germany
				}

				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = no

				completion_reward = {
					swap_ideas = {
						add_idea = CAN_swastika_clubs_skewer
						remove_idea = CAN_swastika_clubs_2
					}
					MEX = {
						add_ideas = synarchist_support_surge
					}
				}

				ai_will_do = {
					factor = 25
				}
			}

			focus = { # Pinion the Eagle
				id = CAN_pinion_the_eagle
				icon = GFX_goal_generic_fortify_city

				x = -1
				y = 3

				relative_position_id = CAN_swastika_clubs

				cost = 10

				prerequisite = {
					focus = CAN_join_germany
				}
				
				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = yes

				completion_reward = {
					every_owned_state = {
						limit = {
							is_controlled_by = ROOT
							any_neighbor_state = {
								controller = {
									NOT = {
										is_in_faction_with = CAN
									}
								}
							}
						}
						add_building_construction = {
							type = bunker
							province = {
								all_provinces = yes
								limit_to_border = yes
							}
							level = 3
							instant_build = yes
						}
					}
					every_owned_state = {
						limit = {
							is_controlled_by = ROOT
							is_coastal = yes
							is_in_home_area = yes
						}
						add_building_construction = {
							type = coastal_bunker
							province = {
								all_provinces = yes
								limit_to_coastal = yes
							}
							level = 3
							instant_build = yes
						}
					}
				}

				ai_will_do = {
					factor = 25
				}
			}

			focus = { # Skewer the Eagle
				id = CAN_skewer_the_eagle
				icon = GFX_goal_generic_military_deal

				x = 1
				y = 3

				relative_position_id = CAN_swastika_clubs

				cost = 10

				prerequisite = {
					focus = CAN_support_a_synarchist_baja
				}

				available = {
					has_government = fascism
					any_country = {
						original_tag = MEX
						has_government = fascism
						NOT = {
							has_war_with = ROOT
						}
					}
				}

				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = no

				completion_reward = {
					set_rule = {
						can_create_factions = yes
					}
					random_country = {
						limit = {
							original_tag = MEX
							has_government = fascism
						}
						country_event = {
							id = tfv_canada.40
						}
					}
				}

				ai_will_do = {
					factor = 25
				}
			}

			focus = { # Defence Scheme No. 1
				id = CAN_defence_scheme_no_1
				icon = GFX_goal_generic_occupy_start_war

				x = -1
				y = 4

				relative_position_id = CAN_swastika_clubs

				cost = 10

				prerequisite = {
					focus = CAN_pinion_the_eagle
					focus = CAN_skewer_the_eagle
				}

				available = {
					is_subject = no
					USA = {
						NOT = {
							is_subject_of = CAN
						}
					}
					NOT = {
						is_in_faction_with = USA
					}
				}
				
				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = no

				completion_reward = {
					set_rule = {
						can_create_factions = yes
					}
					create_wargoal = {
						type = annex_everything
						target = USA
					}
				}

				ai_will_do = {
					factor = 25
				}
			}

			focus = { # Demand Labrador and Newfoundland
				id = CAN_demand_labrador_and_newfoundland
				icon = GFX_goal_generic_territory_or_war

				x = 1
				y = 4

				relative_position_id = CAN_swastika_clubs

				cost = 10

				prerequisite = {
					focus = CAN_pinion_the_eagle
					focus = CAN_skewer_the_eagle
				}

				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = no

				completion_reward = {
					ENG = {
						country_event = {
							id = tfv_canada.60
						}
					}
				}

				ai_will_do = {
					factor = 25
				}
			}

		########################
		# Communist Sub-Branch #
		########################

			focus = { # Burn the Royal Portraits
				id = CAN_burn_the_royal_portraits
				icon = GFX_goal_tfv_burn_the_royal_portraits
				
				x = 8
				y = 1
				relative_position_id = CAN_patriation

				cost = 10

				prerequisite = {
					focus = CAN_patriation
				}

				mutually_exclusive = {
					focus = CAN_permanent_joint_defense_board
				}
				mutually_exclusive = {
					focus = CAN_swastika_clubs
				}

				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = yes

				completion_reward = {
					add_autonomy_ratio = {
						value = 0.1
						localization = CAN_burn_the_royal_portraits
					}
					add_ideas = CAN_communist_ideals
				}

				ai_will_do = {
					factor = 25
					modifier = {
						communism > 0.2
						factor = 2
					}
				}
			}

			focus = { # Communist Labor Total War Committee
				id = CAN_communist_labor_total_war_committee
				icon = GFX_goal_generic_soviet_construction

				x = 0
				y = 1

				relative_position_id = CAN_burn_the_royal_portraits

				cost = 10

				prerequisite = {
					focus = CAN_burn_the_royal_portraits
				}

				available = {			
					is_subject = no
					has_government = communism
				}
				
				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = yes

				completion_reward = {
					swap_ideas = {
						remove_idea = CAN_communist_ideals
						add_idea = CAN_communist_ideals_2
					}
				}

				ai_will_do = {
					factor = 25
				}

			}

			focus = { # Defence Scheme No. 2
				id = CAN_defence_scheme_no_2
				icon = GFX_goal_generic_fortify_city

				x = -1
				y = 2

				relative_position_id = CAN_burn_the_royal_portraits

				cost = 10

				prerequisite = {
					focus = CAN_communist_labor_total_war_committee
				}
				
				mutually_exclusive = {
					focus = CAN_supply_the_red_army
				}

				available = {
					OR = {
						USA = {
							has_war_with = JAP
						}
						USA = {
							has_wargoal_against = JAP
						}
						JAP = {
							has_wargoal_against = USA
						}
						USA = {
							is_justifying_wargoal_against = JAP
						}
						JAP = {
							is_justifying_wargoal_against = USA
						}
					}
				}

				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = yes

				completion_reward = {
					every_owned_state = {
						limit = {
							is_controlled_by = ROOT
							any_neighbor_state = {
								controller = {
									NOT = {
										is_in_faction_with = CAN
									}
								}
							}
						}
						add_building_construction = {
							type = bunker
							province = {
								all_provinces = yes
								limit_to_border = yes
							}
							level = 3
							instant_build = yes
						}
					}
					every_owned_state = {
						limit = {
							is_controlled_by = ROOT
							is_coastal = yes
							is_in_home_area = yes
						}
						add_building_construction = {
							type = coastal_bunker
							province = {
								all_provinces = yes
								limit_to_coastal = yes
							}
							level = 3
							instant_build = yes
						}
					}
				}

				ai_will_do = {
					factor = 25
				}
			}

			focus = { # Supply the Red Army
				id = CAN_supply_the_red_army
				icon = GFX_goal_generic_dangerous_deal

				x = 1
				y = 2

				relative_position_id = CAN_burn_the_royal_portraits

				cost = 10

				prerequisite = {
					focus = CAN_communist_labor_total_war_committee
				}
				
				mutually_exclusive = {
					focus = CAN_defence_scheme_no_2
				}

				available = {
					NOT = {
						has_war_with = SOV
						is_justifying_wargoal_against = SOV
						has_wargoal_against = SOV
					}
					country_exists = SOV
					has_equipment = {
						infantry_equipment > 499
					}
				}

				select_effect = {
					send_equipment = {
						target = SOV
						type = infantry_equipment
						amount = 500
					}
				}

				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = no

				completion_reward = {
					SOV = {
						add_opinion_modifier = {
							target = ROOT
							modifier = CAN_supply_the_red_army
						}
					}
					add_opinion_modifier = {
						target = SOV
						modifier = CAN_supply_the_red_army
					}
					every_country = {
						limit = {
							NOT = {
								has_government = communism
							}
						}
						add_opinion_modifier = {
							target = PREV
							modifier = CAN_supply_the_red_army_trade
						}
					}
				}

				ai_will_do = {
					factor = 25
					modifier = {
						SOV = { 
							has_war = yes 
							has_government = communism
						}
						factor = 3
					}
					modifier = {
						SOV = { 
							has_government = communism
							surrender_progress > 0.3
							 }
						factor = 10
					}
				}
			}

			focus = { # Canada United
				id = CAN_canada_united
				icon = GFX_goal_generic_demand_territory

				x = -1
				y = 3

				relative_position_id = CAN_burn_the_royal_portraits

				cost = 10

				prerequisite = {
					focus = CAN_defence_scheme_no_2
				}

				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = no

				completion_reward = {
					set_rule = {
						can_create_factions = yes
					}
				}

				ai_will_do = {
					factor = 25
				}
			}

			focus = { # Join Comintern
				id = CAN_join_comintern
				icon = GFX_goal_generic_major_alliance

				x = 1
				y = 3

				relative_position_id = CAN_burn_the_royal_portraits

				cost = 10

				prerequisite = {
					focus = CAN_supply_the_red_army
				}

				available = {
					has_government = communism
					SOV = {
						has_government = communism
					}

					NOT = {
						has_war_with = SOV
						is_justifying_wargoal_against = SOV
						has_wargoal_against = SOV
					}
				}
				
				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = no

				completion_reward = {
					SOV = { 
						country_event = {
							id = tfv_canada.10
						}
					}
				}

				ai_will_do = {
					factor = 25
				}
			}

			focus = { # Support the World Revolution
				id = CAN_support_the_world_revolution
				icon = GFX_goal_generic_forceful_treaty

				x = 0
				y = 4

				relative_position_id = CAN_burn_the_royal_portraits

				cost = 10

				prerequisite = {
					focus = CAN_canada_united
					focus = CAN_join_comintern
				}

				cancel_if_invalid = yes
				continue_if_invalid = no
				available_if_capitulated = yes

				completion_reward = {
					swap_ideas = {
						remove_idea = CAN_communist_ideals_2
						add_idea = CAN_communist_ideals_3
					}
				}

				ai_will_do = {
					factor = 25
				}
			}

	####################
	# Air Force Branch #
	####################

		focus = { # RCAF Station Borden
			id = CAN_rcaf_station_borden
			icon = GFX_goal_generic_build_airforce

			x = 35
			y = 0

			cost = 10

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				air_experience = 25
				random_state = {				
					limit = {
						has_state_flag = CAN_rcaf_station_borden_AB
					}
					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
				}
				add_tech_bonus = {
					name = CAN_rcaf_station_borden
					bonus = 0.5
					uses = 1
					category = air_doctrine
				}
			}

			completion_reward = {
				air_experience = 25
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = air_base
							size > 1
						}
					}
					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
					set_state_flag = CAN_rcaf_station_borden_AB
				}
				add_tech_bonus = {
					name = CAN_rcaf_station_borden
					bonus = 0.5
					uses = 1
					category = air_doctrine
				}
			}

			ai_will_do = {
				factor = 3
			}
		}

		focus = { # We Have the Hurricane
			id = CAN_we_have_the_hurricane
			icon = GFX_goal_generic_air_fighter

			x = -1
			y = 1

			relative_position_id = CAN_rcaf_station_borden

			cost = 10

			prerequisite = {
				focus = CAN_rcaf_station_borden
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_we_have_the_hurricane
					bonus = 0.5
					uses = 1
					technology = early_fighter
					technology = fighter1
					technology = fighter2
					technology = fighter3
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # The Pacific Coast Air Defence Radar System
			id = CAN_the_pacific_coast_air_defence_radar_system
			icon = GFX_goal_generic_radar

			x = 1
			y = 1

			relative_position_id = CAN_rcaf_station_borden

			cost = 10

			prerequisite = {
				focus = CAN_rcaf_station_borden
			}

			available = {
				has_tech = radio
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				add_tech_bonus = {
					name = CAN_the_pacific_coast_air_defence_radar_system
					bonus = 0.5
					uses = 1
					category = radar_tech
				}
				random_state = {
					limit = {
						has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1
					}
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
				}
				random_state = {
					limit = {
						has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar2
					}
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
				}
				random_state = {
					limit = {
						has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar3
					}
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
				}
			}

			completion_reward = {
				add_tech_bonus = {
					name = CAN_the_pacific_coast_air_defence_radar_system
					bonus = 0.5
					uses = 1
					category = radar_tech
				}

				if = {
					limit = {
						has_tech = radio_detection
					}
					random_owned_controlled_state = {
						prioritize = {
							473
						}
						limit = {
							is_in_home_area = yes
							free_building_slots = {
								building = radar_station
								size > 0
							}
						}
						add_building_construction = {
							type = radar_station
							level = 1
							instant_build = yes
						}
						set_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1
					}

					random_owned_controlled_state = {
						limit = {
							NOT = {
								has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1
							}
							is_in_home_area = yes
							free_building_slots = {
								building = radar_station
								size > 0
							}
						}
						add_building_construction = {
							type = radar_station
							level = 1
							instant_build = yes
						}
						set_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar2
					}

					random_owned_controlled_state = {
						limit = {
							NOT = {
								has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1
							}
							NOT = {
								has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar2
							}
							is_in_home_area = yes
							free_building_slots = {
								building = radar_station
								size > 0
							}
						}
						add_building_construction = {
							type = radar_station
							level = 1
							instant_build = yes
						}
						set_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar3
					}
					else = {
						set_technology = {
							radio_detection = 1
						}
						effect_tooltip = {
							random_owned_controlled_state = {
								prioritize = {
									473
								}
								limit = {
									is_in_home_area = yes
								}
								add_building_construction = {
									type = radar_station
									level = 1
									instant_build = yes
								}
							}

							random_owned_controlled_state = {
								limit = {
									NOT = {
										state = 473
									}
									NOT = {
										has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1
									}
									is_in_home_area = yes
								}
								add_building_construction = {
									type = radar_station
									level = 1
									instant_build = yes
								}
							}
						}
						random_owned_controlled_state = {
							prioritize = {
								473
							}
							limit = {
								is_in_home_area = yes
								free_building_slots = {
									building = radar_station
									size > 0
								}
							}
							add_building_construction = {
								type = radar_station
								level = 1
								instant_build = yes
							}
							set_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1
						}

						random_owned_controlled_state = {
							limit = {
								NOT = {
									has_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar1
								}
								is_in_home_area = yes
								free_building_slots = {
									building = radar_station
									size > 0
								}
							}
							add_building_construction = {
								type = radar_station
								level = 1
								instant_build = yes
							}
							set_state_flag = CAN_the_pacific_coast_air_defence_radar_system_radar2
						}
					}
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Commonwealth Air Training Plan
			id = CAN_commonwealth_air_training_plan
			icon = GFX_goal_generic_build_airforce

			x = 0
			y = 2

			relative_position_id = CAN_rcaf_station_borden

			cost = 10

			prerequisite = {
				focus = CAN_the_pacific_coast_air_defence_radar_system
				focus = CAN_we_have_the_hurricane
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				air_experience = 25
				random_state = {
					limit = {
						has_state_flag = CAN_commonwealth_air_training_plan_AB
					}
					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
				}
				add_tech_bonus = {
					name = CAN_commonwealth_air_training_plan
					bonus = 0.5
					uses = 1
					category = air_doctrine
				}
			}

			completion_reward = {
				air_experience = 25
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = air_base
							size > 1
						}
					}
					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
					set_state_flag = CAN_commonwealth_air_training_plan_AB
				}
				add_tech_bonus = {
					name = CAN_commonwealth_air_training_plan
					bonus = 0.5
					uses = 1
					category = air_doctrine
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Fund Fairchilds Development
			id = CAN_fund_fairchilds_development
			icon = GFX_goal_generic_air_bomber

			x = -1
			y = 3

			relative_position_id = CAN_rcaf_station_borden

			cost = 10

			prerequisite = {
				focus = CAN_commonwealth_air_training_plan
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_fund_fairchilds_development
					bonus = 0.5
					uses = 1
					category = tactical_bomber
					category = cas_bomber
				}
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = CAN_fairchild_aircraft_ltd
			}

			ai_will_do = {
				factor = 25
				modifier = {
					factor = 2
					has_completed_focus = CAN_cookie_carriers
				}
			}
		}

		focus = { # Cookie Carriers
			id = CAN_cookie_carriers
			icon = GFX_goal_generic_CAS

			x = 1
			y = 3

			relative_position_id = CAN_rcaf_station_borden

			cost = 10

			prerequisite = {
				focus = CAN_commonwealth_air_training_plan
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_cookie_carriers
					bonus = 0.5
					uses = 1
					category = cat_strategic_bomber
				}
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = CAN_handley_page
			}

			ai_will_do = {
				factor = 25
				modifier = {
					factor = 2
					has_completed_focus = CAN_fund_fairchilds_development
				}
			}
		}

		focus = { # The Sabre Project
			id = CAN_the_sabre_project
			icon = GFX_focus_rocketry

			x = 0
			y = 4

			relative_position_id = CAN_rcaf_station_borden

			cost = 10

			prerequisite = {
				focus = CAN_cookie_carriers
			}
			prerequisite = {
				focus = CAN_fund_fairchilds_development
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_the_sabre_project
					ahead_reduction = 0.5
					uses = 2
					category = rocketry
					category = jet_technology
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

	###############
	# Navy Branch #
	###############

		focus = { # Halifax Shipyards
			id = CAN_halifax_shipyards
			icon = GFX_goal_generic_construct_naval_dockyard

			x = 39
			y = 0

			cost = 10

			ai_will_do = {
				factor = 9
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				navy_experience = 25
				random_state = {
					limit = {
						has_state_flag = CAN_halifax_shipyards_DY
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = dockyard
						level = 3
						instant_build = yes
					}
				}
			}

			completion_reward = {
				navy_experience = 25
				random_owned_controlled_state = {
					prioritize = {
						464
					}
					limit = {
						is_coastal = yes
						free_building_slots = {
							building = dockyard
							size > 2
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = dockyard
						level = 3
						instant_build = yes
					}
					set_state_flag = CAN_halifax_shipyards_DY
				}
			}
		}

		focus = { # Destroyer Effort
			id = CAN_destroyer_effort
			icon = GFX_goal_generic_navy_anti_submarine

			x = 0
			y = 1

			relative_position_id = CAN_halifax_shipyards

			cost = 10

			prerequisite = {
				focus = CAN_halifax_shipyards
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_destroyer_effort
					bonus = 0.5
					ahead_reduction = 1
					uses = 1
					category = dd_tech
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Light Cruiser Effort
			id = CAN_light_cruiser_effort
			icon = GFX_goal_generic_navy_cruiser

			x = -1
			y = 2

			relative_position_id = CAN_halifax_shipyards

			cost = 10

			prerequisite = {
				focus = CAN_destroyer_effort
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_light_cruiser_effort
					bonus = 0.5
					ahead_reduction = 1
					uses = 1
					category = cl_tech
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Heavy Cruiser Effort
			id = CAN_heavy_cruiser_effort
			icon = GFX_goal_generic_occupy_states_coastal

			x = 1
			y = 2

			relative_position_id = CAN_halifax_shipyards

			cost = 10

			prerequisite = {
				focus = CAN_destroyer_effort
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_tech_bonus = {
					name = CAN_heavy_cruiser_effort
					bonus = 0.5
					ahead_reduction = 1
					uses = 1
					category = ca_tech
				}
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Escort Fleet
			id = CAN_escort_fleet
			icon = GFX_goal_generic_navy_doctrines_tactics

			x = -1
			y = 3

			relative_position_id = CAN_halifax_shipyards

			cost = 10

			prerequisite = {
				focus = CAN_light_cruiser_effort
			}
			
			mutually_exclusive = {
				focus = CAN_fleet_in_being
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				navy_experience = 25
				add_tech_bonus = {
					name = CAN_escort_fleet
					bonus = 0.5
					uses = 2
					category = convoy_defense_tree
				}
			}

			ai_will_do = {
				factor = 25
				modifier = {
					has_war_with = GER
					factor = 2
				}
			}
		}

		focus = { # Fleet in Being
			id = CAN_fleet_in_being
			icon = GFX_goal_generic_navy_battleship

			x = 1
			y = 3

			relative_position_id = CAN_halifax_shipyards

			cost = 10

			prerequisite = {
				focus = CAN_light_cruiser_effort
			}
			
			mutually_exclusive = {
				focus = CAN_escort_fleet
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				navy_experience = 25
				add_tech_bonus = {
					name = CAN_fleet_in_being
					bonus = 0.5
					uses = 2
					category = cat_fleet_in_being
				}			
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Degauss Ship Hullas
			id = CAN_degauss_ship_hulls
			icon = GFX_goal_generic_navy_anti_submarine

			x = -1
			y = 4

			relative_position_id = CAN_halifax_shipyards

			cost = 10

			prerequisite = {
				focus = CAN_escort_fleet
				focus = CAN_fleet_in_being
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			completion_reward = {
				add_ideas = CAN_degauss_ship_hulls
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # Trade Fleet
			id = CAN_trade_fleet
			icon = GFX_goal_generic_positive_trade_relations

			x = 1
			y = 4

			relative_position_id = CAN_halifax_shipyards

			cost = 10

			prerequisite = {
				focus = CAN_escort_fleet
				focus = CAN_fleet_in_being
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = no

			completion_reward = {
				add_ideas = CAN_trade_fleet			
			}

			ai_will_do = {
				factor = 25
			}
		}

		focus = { # United Shipyards
			id = CAN_united_shipyards
			icon = GFX_goal_generic_construct_naval_dockyard

			x = 0
			y = 5

			relative_position_id = CAN_halifax_shipyards

			cost = 10

			prerequisite = {
				focus = CAN_degauss_ship_hulls
				focus = CAN_trade_fleet
			}

			cancel_if_invalid = yes
			continue_if_invalid = no
			available_if_capitulated = yes

			complete_tooltip = {
				navy_experience = 25
				random_state = {
					limit = {
						has_state_flag = CAN_united_shipyards_DY
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = dockyard
						level = 3
						instant_build = yes
					}
				}
			}

			completion_reward = {
				navy_experience = 25
				random_owned_controlled_state = {
					limit = {
						is_coastal = yes
						free_building_slots = {
							building = dockyard
							size > 2
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = dockyard
						level = 3
						instant_build = yes
					}
					set_state_flag = CAN_united_shipyards_DY
				}
			}

			ai_will_do = {
				factor = 25
			}
		}
}		
